{"ast":null,"code":"var _jsxFileName = \"/home/adm1/projetos-trybe/sd-015-a-project-frontend-online-store/src/pages/Home.jsx\";\nimport React from 'react';\nimport CartButton from '../components/CartButton';\nimport Categories from '../components/Categories';\nimport Content from '../components/Content';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.requestApi2 = radioid => {\n      this.setState({\n        id: radioid,\n        searchValue: ''\n      }, () => {\n        const {\n          searchValue,\n          id\n        } = this.state;\n        getProductsFromCategoryAndQuery(id, searchValue).then(result => {\n          this.setState({\n            result,\n            search: true\n          });\n        });\n      });\n    };\n\n    this.requestApi = async () => {\n      this.setState({\n        id: ''\n      }, () => {\n        const {\n          searchValue,\n          id\n        } = this.state;\n        getProductsFromCategoryAndQuery(id, searchValue).then(result => {\n          this.setState({\n            result,\n            search: true,\n            searchValue: ''\n          });\n        });\n      });\n    };\n\n    this.requestApi = this.requestApi.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.updateLocal = this.updateLocal.bind(this);\n    this.state = {\n      searchValue: '',\n      result: [],\n      id: '',\n      search: false,\n      length: localStorage.Cart ? JSON.parse(localStorage.getItem('Cart')).length : 0\n    };\n  }\n\n  handleChange({\n    target\n  }) {\n    const {\n      name,\n      value\n    } = target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  updateLocal() {\n    const GET_LOCAL = JSON.parse(localStorage.getItem('Cart'));\n    let quantityOfProductsAdded;\n    const length = GET_LOCAL.forEach(product => quantityOfProductsAdded += product[1].QUANTIDADE);\n    this.setState({\n      length\n    });\n  }\n\n  render() {\n    const {\n      result,\n      search,\n      id,\n      searchValue,\n      length\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"main-screen-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"main-screen-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      \"data-testid\": \"query-input\",\n      name: \"searchValue\",\n      onChange: this.handleChange,\n      value: searchValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"query-button\",\n      onClick: this.requestApi,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, \"Pesquisar\")), /*#__PURE__*/React.createElement(CartButton, {\n      length: length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"home-initial-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, \"Digite algum termo de pesquisa ou escolha uma categoria.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Categories, {\n      value: id,\n      handleChange: this.requestApi2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, search ? /*#__PURE__*/React.createElement(Content, {\n      result: result.results,\n      updateLocal: this.updateLocal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, \"Voc\\xEA ainda n\\xE3o realizou uma busca\"))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/adm1/projetos-trybe/sd-015-a-project-frontend-online-store/src/pages/Home.jsx"],"names":["React","CartButton","Categories","Content","getProductsFromCategoryAndQuery","Home","Component","constructor","props","requestApi2","radioid","setState","id","searchValue","state","then","result","search","requestApi","bind","handleChange","updateLocal","length","localStorage","Cart","JSON","parse","getItem","target","name","value","GET_LOCAL","quantityOfProductsAdded","forEach","product","QUANTIDADE","render","results"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CartButton from '../components/CartButton';\nimport Categories from '../components/Categories';\nimport Content from '../components/Content';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.requestApi = this.requestApi.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.updateLocal = this.updateLocal.bind(this);\n    this.state = {\n      searchValue: '',\n      result: [],\n      id: '',\n      search: false,\n      length: localStorage.Cart ? JSON.parse(localStorage.getItem('Cart')).length : 0,\n    };\n  }\n\n  handleChange({ target }) {\n    const { name, value } = target;\n    this.setState({ [name]: value });\n  }\n\n  requestApi2 = (radioid) => {\n    this.setState({\n      id: radioid,\n      searchValue: '',\n    }, () => {\n      const { searchValue, id } = this.state;\n      getProductsFromCategoryAndQuery(id, searchValue).then((result) => {\n        this.setState({ result, search: true });\n      });\n    });\n  }\n\n  requestApi = async () => {\n    this.setState({\n      id: '',\n    }, () => {\n      const { searchValue, id } = this.state;\n      getProductsFromCategoryAndQuery(id, searchValue).then((result) => {\n        this.setState({ result, search: true, searchValue: '' });\n      });\n    });\n  }\n\n  updateLocal() {\n    const GET_LOCAL = JSON.parse(localStorage.getItem('Cart'));\n    let quantityOfProductsAdded;\n    const length = GET_LOCAL.forEach((product) => quantityOfProductsAdded += product[1].QUANTIDADE)\n    this.setState({ length });\n  }\n\n  render() {\n    const { result, search, id, searchValue, length } = this.state;\n    return (\n      <section className=\"main-screen-section\">\n        <header className=\"main-screen-header\">\n          <div className=\"container-input\">\n            <input\n              type=\"text\"\n              data-testid=\"query-input\"\n              name=\"searchValue\"\n              onChange={ this.handleChange }\n              value={ searchValue }\n            />\n            <button\n              type=\"button\"\n              data-testid=\"query-button\"\n              onClick={ this.requestApi }\n            >\n              Pesquisar\n            </button>\n          </div>\n          <CartButton length={ length } />\n          <p data-testid=\"home-initial-message\">\n            Digite algum termo de pesquisa ou escolha uma categoria.\n          </p>\n        </header>\n        <div className=\"columns\">\n          <div className=\"column\">\n            <Categories value={ id } handleChange={ this.requestApi2 } />\n          </div>\n          <div className=\"column\">\n            {(search) ? (\n              <Content result={ result.results } updateLocal={ this.updateLocal } />\n            )\n              : <h4>Você ainda não realizou uma busca</h4>}\n          </div>\n        </div>\n\n      </section>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}